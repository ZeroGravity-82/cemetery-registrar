{% extends 'logged.html.twig' %}

{% block title %}Захоронения{% endblock %}

{% block body %}
  {{ parent() }}

  <div class="mb-2 mb-lg-2">
    <p class="pt-2 fs-5 fw-bold text-success">Захоронения</p>

    <div class="d-flex pb-2">
      <div class="flex-grow-1">
        <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createBurialModal" aria-label="Создать">Создать</button>
        <button type="button" class="btn btn-outline-primary btn-sm disabled" aria-label="Создать группу">Создать группу</button>
        <button type="button" class="btn btn-outline-primary btn-sm disabled" aria-label="Скопировать">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
            <path d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z"/>
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
          </svg>
        </button>
        <button type="button" class="btn btn-outline-primary btn-sm disabled" aria-label="Групповая печать копщику">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
            <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
            <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
          </svg>Групповая печать копщику</button>
      </div>

{#      <form class="burial-search col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">#}
{#        <input type="search" class="form-control form-control-dark" placeholder="Поиск..." aria-label="Поиск">#}
{#      </form>#}
{#      <div class="text-end">#}
{#        <div class="btn dropdown">#}
{#          <a class="dropdown-toggle text-decoration-none" href="#" id="dropdownMore" data-bs-toggle="dropdown" aria-expanded="false">Еще</a>#}
{#          <ul class="dropdown-menu" aria-labelledby="dropdownMore">#}
{#            <li><a class="dropdown-item disabled" href="#">Пункт 1</a></li>#}
{#            <li><a class="dropdown-item disabled" href="#">Пункт 2</a></li>#}
{#          </ul>#}
{#        </div>#}
{#      </div>#}
    </div>

    <div class="table-responsive">
      <table class="table table-sm table-hover caption-top">
        <thead class="table-light align-middle">
          <tr>
            <th>Ф.И.О.</th>
            <th>Код</th>
            <th>Дата рождения</th>
            <th>Дата смерти</th>
            <th>Дата захоронения</th>
            <th>Возраст</th>
            <th>Место захоронения</th>
            <th>Заказчик</th>
            <th>Адрес заказчика</th>
            <th>Телефон заказчика</th>
          </tr>
        </thead>
        <tbody>
          {% for burialViewListItem in burialViewList.burialViewListItems %}
            <tr>
            <td>{{- burialViewListItem.deceasedNaturalPersonFullName -}}</td>
            <td>{{- burialViewListItem.code -}}</td>
            <td>{{- burialViewListItem.deceasedNaturalPersonBornAt is empty ? '' : burialViewListItem.deceasedNaturalPersonBornAt|date('d.m.Y') -}}</td>
            <td>{{- burialViewListItem.deceasedDiedAt              is empty ? '' : burialViewListItem.deceasedDiedAt|date('d.m.Y') -}}</td>
            <td>{{- burialViewListItem.buriedAt                    is empty ? '' : burialViewListItem.buriedAt|date('d.m.Y H:i') -}}</td>
            <td>{{- burialViewListItem.deceasedAge                 is empty ? '' : burialViewListItem.deceasedAge -}}</td>
            <td>
              {% if burialViewListItem.burialPlaceType == constant('Cemetery\\Registrar\\Domain\\BurialPlace\\GraveSite\\GraveSite::CLASS_SHORTCUT') %}
                {{- burialViewListItem.burialPlaceGraveSiteCemeteryBlockName is empty ? '' : 'квартал '~burialViewListItem.burialPlaceGraveSiteCemeteryBlockName -}}
                {{- burialViewListItem.burialPlaceGraveSiteRowInBlock        is empty ? '' : ', ряд '~burialViewListItem.burialPlaceGraveSiteRowInBlock -}}
                {{- burialViewListItem.burialPlaceGraveSitePositionInRow     is empty ? '' : ', место '~burialViewListItem.burialPlaceGraveSitePositionInRow -}}
              {% elseif burialViewListItem.burialPlaceType == constant('Cemetery\\Registrar\\Domain\\BurialPlace\\ColumbariumNiche\\ColumbariumNiche::CLASS_SHORTCUT') %}
                {{- burialViewListItem.burialPlaceColumbariumNicheColumbariumName  is empty ? '' : 'колумбарий '~burialViewListItem.burialPlaceColumbariumNicheColumbariumName -}}
                {{- burialViewListItem.burialPlaceColumbariumNicheRowInColumbarium is empty ? '' : ', ряд '~burialViewListItem.burialPlaceColumbariumNicheRowInColumbarium -}}
                {{- burialViewListItem.burialPlaceColumbariumNicheNumber           is empty ? '' : ', ниша '~burialViewListItem.burialPlaceColumbariumNicheNumber -}}
              {% elseif burialViewListItem.burialPlaceType == constant('Cemetery\\Registrar\\Domain\\BurialPlace\\MemorialTree\\MemorialTree::CLASS_SHORTCUT') %}
                {{- burialViewListItem.burialPlaceMemorialTreeNumber is empty ? '' : 'сосна '~burialViewListItem.burialPlaceMemorialTreeNumber -}}
              {% endif %}
            </td>
            <td>
              {% if burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\NaturalPerson\\NaturalPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerNaturalPersonFullName is empty ? '' : burialViewListItem.customerNaturalPersonFullName -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\SoleProprietor\\SoleProprietor::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerSoleProprietorName is empty ? '' : burialViewListItem.customerSoleProprietorName -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\JuristicPerson\\JuristicPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerJuristicPersonName is empty ? '' : burialViewListItem.customerJuristicPersonName -}}
              {% endif %}
            </td>
            <td>
              {% if burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\NaturalPerson\\NaturalPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerNaturalPersonAddress is empty ? '' : burialViewListItem.customerNaturalPersonAddress -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\SoleProprietor\\SoleProprietor::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerSoleProprietorRegistrationAddress is empty
                  ? burialViewListItem.customerSoleProprietorActualLocationAddress is empty ? '' : burialViewListItem.customerSoleProprietorActualLocationAddress
                  : burialViewListItem.customerSoleProprietorRegistrationAddress -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\JuristicPerson\\JuristicPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerJuristicPersonLegalAddress is empty
                  ? burialViewListItem.customerJuristicPersonPostalAddress is empty ? '' : burialViewListItem.customerJuristicPersonPostalAddress
                  : burialViewListItem.customerJuristicPersonLegalAddress -}}
              {% endif %}
            </td>
            <td>
              {% if burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\NaturalPerson\\NaturalPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerNaturalPersonPhone is empty ? '' : burialViewListItem.customerNaturalPersonPhone -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\SoleProprietor\\SoleProprietor::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerSoleProprietorPhone is empty ? '' : burialViewListItem.customerSoleProprietorPhone -}}
              {% elseif burialViewListItem.customerType == constant('Cemetery\\Registrar\\Domain\\Organization\\JuristicPerson\\JuristicPerson::CLASS_SHORTCUT') %}
                {{- burialViewListItem.customerJuristicPersonPhone is empty ? '' : burialViewListItem.customerJuristicPersonPhone -}}
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Burial modal -->
  <div class="modal fade" id="createBurialModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="createBurialModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="createBurialModalLabel">Создание захоронения</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Основная</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link disabled" id="geo-position-tab" data-bs-toggle="tab" data-bs-target="#geo-position" type="button" role="tab" tabindex="-1" aria-controls="geo-position" aria-selected="false">Геопозиция</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link disabled" id="reminders-tab" data-bs-toggle="tab" data-bs-target="#reminders" type="button" role="tab" tabindex="-1" aria-controls="reminders" aria-selected="false">Напоминания</button>
            </li>
          </ul>
          <form class="tab-content" id="createBurialTabContent">
            <div class="container tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
              <div class="row">
                <div class="col-md-6 card">
                  <div class="card-body">
                    <h5 class="card-title text-success">Информация об умершем</h5>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedNaturalPersonFullName" class="form-label">Ф.И.О.</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputDeceasedNaturalPersonFullName"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedNaturalPersonBornAt" class="form-label">Дата рождения</label></div>
                      <div class="col-md-9"><input type="date" class="form-control" id="inputDeceasedNaturalPersonBornAt"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedDiedAt" class="form-label">Дата смерти</label></div>
                      <div class="col-md-9"><input type="date" class="form-control" id="inputDeceasedDiedAt"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedAge" class="form-label">Возраст</label></div>
                      <div class="col-md-9"><input type="number" min="0" max="200" class="form-control" id="inputDeceasedAge"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedDeathCertificateId" class="form-label">Свидетельство о смерти</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputDeceasedDeathCertificateId"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputDeceasedCauseOfDeath" class="form-label">Причина смерти</label></div>
                      <div class="col-md-9">
                        <select class="form-select" id="inputDeceasedCauseOfDeath" aria-label="Причина смерти">
                          <option selected></option>
                          <option value="Обструктивная болезнь легких">Обструктивная болезнь легких</option>
                          <option value="Аневризма брюшной аорты разорванная">Аневризма брюшной аорты разорванная</option>
                          <option value="Онкология">Онкология</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 card">
                  <div class="card-body">
                    <h5 class="card-title text-success">Заказчик</h5>
                    <div class="row">
                      <div class="col-md-3"><label for="inputCustomerNaturalPersonFullName" class="form-label">Ф.И.О.</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonFullName"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputCustomerNaturalPersonPhone" class="form-label">Телефон</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPhone"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputCustomerNaturalPersonPhoneAdditional" class="form-label">Доп. телефон</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPhoneAdditional"></div>
                    </div>
                    <div class="row">
                      <div class="col-md-3"><label for="inputCustomerNaturalPersonAddress" class="form-label">Адрес</label></div>
                      <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonAddress"></div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title text-success">Паспортные данные</h5>
                      <div class="row">
                        <div class="col-6 row">
                          <div class="col-md-3"><label for="inputCustomerNaturalPersonPassportSeries" class="form-label">Серия</label></div>
                          <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPassportSeries"></div>
                        </div>
                        <div class="col-6 row">
                          <div class="col-md-3"><label for="inputCustomerNaturalPersonPassportNumber" class="form-label">Номер</label></div>
                          <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPassportNumber"></div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputCustomerNaturalPersonPassportIssuedAt" class="form-label">Дата выдачи</label></div>
                        <div class="col-md-9"><input type="date" class="form-control" id="inputCustomerNaturalPersonPassportIssuedAt"></div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputCustomerNaturalPersonPassportIssuedBy" class="form-label">Кем выдан</label></div>
                        <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPassportIssuedBy"></div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputCustomerNaturalPersonPassportDivisionCode" class="form-label">Код подразделения</label></div>
                        <div class="col-md-9"><input type="text" class="form-control" id="inputCustomerNaturalPersonPassportDivisionCode"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row card">
                <div class="card-body">
                  <h5 class="card-title text-success">Захоронение</h5>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-3"><label for="inputFuneralCompanyJuristicPersonName" class="form-label">Похоронная фирма</label></div>
                        <div class="col-md-9">
                          <select class="form-select" id="inputFuneralCompanyJuristicPersonName" aria-label="Похоронная фирма">
                            <option selected></option>
                            <option value="JP005">МАНО СПС "Ритуал"</option>
                            <option value="JP006">ИМИ</option>
                            <option value="JP007">Надежда</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputBuriedAt" class="form-label">Дата захоронения</label></div>
                        <div class="col-md-9"><input type="datetime-local" class="form-control" id="inputBuriedAt"></div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 row">
                          <div class="col-md-3"><label for="inputFuneralCompanyJuristicPersonName" class="form-label">Квартал</label></div>
                          <div class="col-md-9">
                            <select class="form-select" id="inputFuneralCompanyJuristicPersonName" aria-label="Квартал">
                              <option selected></option>
                              <option value="CB001">воинский</option>
                              <option value="CB002">общий А</option>
                              <option value="CB003">общий Б</option>
                              <option value="CB004">мусульманский</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-6 row">
                          <div class="col-md-3"><label for="inputBurialPlaceGraveSiteRowInBlock" class="form-label">Ряд</label></div>
                          <div class="col-md-9"><input type="number" min="1" class="form-control" id="inputBurialPlaceGraveSiteRowInBlock"></div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputBurialPlaceGraveSiteGeoPosition" class="form-label">Геопозиция</label></div>
                        <div class="col-md-9"><input type="text" class="form-control" id="inputBurialPlaceGraveSiteGeoPosition"></div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-3"><label for="inputBurialContainerCoffinShape" class="form-label">Форма гроба</label></div>
                        <div class="col-md-9">
                          <select class="form-select" id="inputBurialContainerCoffinShape" aria-label="Форма гроба">
                            <option selected></option>
                            <option value="TRAPEZOID">Трапеция</option>
                            <option value="GREEK_WITH_HANDLES">Грек (с ручками)</option>
                            <option value="GREEK_WITHOUT_HANDLES">Грек (без ручек)</option>
                            <option value="AMERICAN">Американец</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3"><label for="inputBurialContainerCoffinSize" class="form-label">Размер гроба</label></div>
                        <div class="col-md-9"><input type="number" min="165" max="225" class="form-control" id="inputBurialContainerCoffinSize"></div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="inputBurialContainerCoffinIsNonStandard">
                            <label class="form-check-label" for="inputBurialContainerCoffinIsNonStandard">Не стандарт</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="containertab-pane fade d-none" id="geo-position" role="tabpanel" aria-labelledby="geo-position-tab">...</div>
            <div class="containertab-pane fade d-none" id="reminders" role="tabpanel" aria-labelledby="reminders-tab">...</div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-warning btn-sm" aria-label="Записать и закрыть">Записать и закрыть</button>
          <button type="button" class="btn btn-secondary btn-sm disabled" aria-label="Записать">Записать</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
